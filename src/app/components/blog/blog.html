<div class="bg-gray-50 dark:bg-gray-950 transition-colors duration-300">
  <main>
    <!-- Hero Section -->
    <section class="border-b border-gray-200 dark:border-gray-800">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-12">
        <div class="text-center">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
            <app-translated-text key="blog.title"></app-translated-text>
          </h1>
          <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto transition-colors duration-300">
            <app-translated-text key="blog.subtitle"></app-translated-text>
          </p>
        </div>
      </div>
    </section>

    <!-- Filter Section -->
    <section class="border-b border-gray-200 dark:border-gray-800">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="flex flex-col sm:flex-row gap-4 items-center justify-between">
          <!-- Search -->
          <div class="w-full sm:w-80">
            <input
              type="text"
              placeholder="Search blog posts..."
              class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-gray-500 dark:placeholder-gray-400"
              [value]="searchQuery"
              (input)="onSearchChange($event)"
            />
          </div>

          <!-- Category Filter -->
          <div class="w-full sm:w-48">
            <select
              class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              [value]="selectedCategory"
              (change)="onCategoryChange($event)"
            >
              @for (category of categories; track category.id) {
                <option [value]="category.id">
                  {{ category.name }}
                </option>
              }
            </select>
          </div>
        </div>
      </div>
    </section>

    <!-- Blog Posts Grid -->
    <section class="pt-12 pb-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Posts Grid -->
        @if (filteredPosts.length > 0) {
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            @for (post of filteredPosts; track post.id) {
              <article
                class="group cursor-pointer bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 hover:shadow-lg"
                (click)="navigateToPost(post)"
              >
                <!-- Image -->
                <div
                  class="aspect-video bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-600 rounded-t-lg flex items-center justify-center overflow-hidden relative"
                >
                  <!-- Use actual image if available, otherwise show placeholder -->
                  @if (post.image?.url) {
                    <img [src]="post.image!.url" [alt]="post.image!.alt" class="w-full h-full object-cover" />
                  }
                  @if (!post.image?.url) {
                    <div class="text-center p-6">
                      <div
                        class="w-16 h-16 mx-auto mb-4 bg-blue-600 dark:bg-blue-500 rounded-lg flex items-center justify-center"
                      >
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                          />
                        </svg>
                      </div>
                      <div class="text-xs font-semibold text-blue-800 dark:text-blue-200 uppercase tracking-wide">
                        {{ post.category }}
                      </div>
                    </div>
                  }
                </div>

                <!-- Content -->
                <div class="p-6">
                  <!-- Category Badge -->
                  <div class="flex items-center gap-2 mb-3">
                    <span
                      class="px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs font-medium rounded-full"
                    >
                      {{ post.category }}
                    </span>
                    <span class="text-xs text-gray-500 dark:text-gray-400">{{ post.readTime }}</span>
                  </div>

                  <!-- Title -->
                  <h2
                    class="text-xl font-bold text-gray-900 dark:text-white mb-3 line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"
                  >
                    {{ post.title }}
                  </h2>

                  <!-- Excerpt -->
                  <p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-3 leading-relaxed">
                    {{ formatExcerpt(post.excerpt) }}
                  </p>

                  <!-- Metadata -->
                  <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
                    <span>{{ formatDate(post.date) }}</span>
                    <span>by {{ post.author }}</span>
                  </div>
                </div>
              </article>
            }
          </div>
        }

        <!-- No Posts Found -->
        @if (filteredPosts.length === 0) {
          <div class="text-center py-16">
            <div class="text-gray-400 dark:text-gray-500 mb-4">
              <svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                />
              </svg>
            </div>
            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">No posts found</h3>
            <p class="text-gray-500 dark:text-gray-400">Try adjusting your search or filter criteria.</p>
          </div>
        }
      </div>
    </section>
  </main>
</div>
